@inherits ComponentManager
@page "/hydrophones"

<RadzenLayout Style="height:calc(100%);">
    <RadzenBody>

        <PageHeaderAndTitle Title="Hydrophones" 
                        Description="A list of the locations for all the hydrophones used to collect whale calls for analysis and reporting."/>

        <LoadingSpinner IsLoading=@IsLoading />

        @if (HydrophoneItemViews != null && HydrophoneItemViews.Count == 0)
        {
            <RadzenAlert AllowClose="false"
                         AlertStyle="AlertStyle.Warning"
                         Variant="Variant.Flat"
                         Shade="Shade.Lighter">
                There are no Hydrophones listed.
            </RadzenAlert>
        }

        @if (HydrophoneItemViews != null && HydrophoneItemViews.Count > 0)
        {
            @foreach (var item in HydrophoneItemViews)
            {
                <RadzenRow>
                    <RadzenColumn Size="2" class="rz-p-5">
                        <RadzenImage Path="@item.ImageUrl" style="width: 100px; height: 100px; border-radius: 8px; margin-right: 8px; vertical-align:top;" />
                    </RadzenColumn>
                    <RadzenColumn Size="6" class="rz-p-5">
                        <RadzenText TextStyle="TextStyle.Subtitle1" Text="@item.Name" />
                        <div style="white-space:pre-line;">@((MarkupString)item.IntroHtml)</div>
                        <RadzenButton>Listen Live</RadzenButton>
                        <RadzenButton>On the Map</RadzenButton>
                    </RadzenColumn>
                    <RadzenColumn Size="4" class="rz-p-5">
                        <RadzenGoogleMap style="height: 400px" Options=@(new Dictionary<string, object> { { "disableDoubleClickZoom", true } })
                                         Zoom=@Zoom Center=@(new GoogleMapPosition() { Lat = @item.Latitude, Lng = @item.Longitude })>
                            <Markers>
                                <RadzenGoogleMapMarker Title="@item.Name" Label="@item.Name" Position=@(new GoogleMapPosition() { Lat = @item.Latitude, Lng = @item.Longitude }) />
                                         </Markers>
                        </RadzenGoogleMap>
                    </RadzenColumn>
                </RadzenRow>
            }
        }

        @*         <RadzenDataGrid Data=@HydrophoneItemViews
        TItem="HydrophoneItemView"
        @ref="grid">
        <Columns>
        <RadzenDataGridColumn TItem="HydrophoneItemView" Title="Photo" Width="150px">
        <Template Context="data">
        <RadzenImage Path="@data.ImageUrl" style="width: 100px; height: 100px; border-radius: 8px; margin-right: 8px; vertical-align:top;" />
        </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="HydrophoneItemView"
        Property="Name"
        Title="Name">
        <Template Context="data">
        <RadzenText TextStyle="TextStyle.Subtitle1" Text="@data.Name" />
        <div style="white-space:pre-line;">@((MarkupString)data.IntroHtml)</div>
        <RadzenButton>Listen Live</RadzenButton>
        <RadzenButton>On the Map</RadzenButton>
        </Template>
        </RadzenDataGridColumn>
        </Columns>
        </RadzenDataGrid> *@



    </RadzenBody>
</RadzenLayout>
